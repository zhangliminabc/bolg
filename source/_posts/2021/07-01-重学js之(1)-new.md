---
title: 重学js之(1)-new
date: 2021-07-01 20:21:21
tags: [JavaScript]
categories: [JavaScript]
updated:
description:
keywords: new, javascriptj
---

#### new的作用

```javascript
 
 function Test(name) {
	 this.name = name
 }
 Test.prototype.setName = function () {
	 this.name = name
 }

 const instance = new Test('测试')
 console.log(instance.name) // 测试

 instance.setName('测试1')
 console.log(instance.name) // 测试1

```

###### 总结

<p> new 通过构造函数创建出来的实例可以访问构造函数中的属性</p>
<p> new 通过构造函数创建出来的实例可以访问原型链中的属性和方法； 也就是说通过new操作符实例和构造函数通过原型链连接起来了</p>


```javascript

	function Test(name) {
		this.name = name
		return { age: 24} 
	}

	const t = new Test('yck')
    console.log(t) // { age: 26 }
    console.log(t.name) // 'undefined'

```

###### 总结

<p> 构造函数如果返回值为对象，那么这个返回值会被正常使用 </p>

###### 自定义实现 new 操作符

```javascript
	
	function createNew(Con, ...args) {
		let obj = {}
		// 解释了static类型的方法不能通过this调用的原因
		Object.setPrototypeOf(obj, Con.prototype)
		// apply方法调用一个具有给定this值的函数
		let result = Con.apply(this, args)
		return result instanceof Object ? result : obj
	}

```
